<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-commerce</title>
    <link rel="icon" href="assets/image/logo.png" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="assets/css/style.css" type="text/css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <img src="assets/image/logo.png" alt="logo" />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                SHOP
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a class="dropdown-item" href="#">Something else here</a>
                </li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-disabled="true">PAYMENT CONFIRMATION</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-disabled="true">TRACK YOUR ORDER</a>
            </li>
          </ul>
          <form class="d-flex" role="search">
            <!-- <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            /> -->
            <button class="btn-navbar" type="submit">
              <iconify-icon
                icon="fluent:search-20-regular"
                width="30"
              ></iconify-icon>
            </button>
          </form>
          <button class="btn-navbar">Login</button>
          <button class="btn-navbar" id="sidebarCart">
            Cart
            <iconify-icon icon="fe:cart"></iconify-icon>
          </button>
        </div>
      </div>
    </nav>
    <div id="tes"></div>
    <div id="carouselExampleIndicators" class="carousel slide">
      <div class="carousel-indicators">
        <button
          type="button"
          data-bs-target="#carouselExampleIndicators"
          data-bs-slide-to="0"
          class="active"
          aria-current="true"
          aria-label="Slide 1"
        ></button>
        <button
          type="button"
          data-bs-target="#carouselExampleIndicators"
          data-bs-slide-to="1"
          aria-label="Slide 2"
        ></button>
        <button
          type="button"
          data-bs-target="#carouselExampleIndicators"
          data-bs-slide-to="2"
          aria-label="Slide 3"
        ></button>
      </div>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img
            src="assets/image/carousel.png"
            class="d-block w-100"
            alt="..."
          />
        </div>
        <div class="carousel-item">
          <img
            src="assets/image/carousel.png"
            class="d-block w-100"
            alt="..."
          />
        </div>
        <div class="carousel-item">
          <img
            src="assets/image/carousel.png"
            class="d-block w-100"
            alt="..."
          />
        </div>
      </div>
      <button
        class="carousel-control-prev"
        type="button"
        data-bs-target="#carouselExampleIndicators"
        data-bs-slide="prev"
      >
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button
        class="carousel-control-next"
        type="button"
        data-bs-target="#carouselExampleIndicators"
        data-bs-slide="next"
      >
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
    <div class="d-flex justify-content-around mt-4">
      <div class="card-adv-1">
        <h3>T-SHIRT COLLECTION</h3>
      </div>
      <div class="card-adv-2">
        <h3>T-SHIRT COLLECTION</h3>
      </div>
      <div class="card-adv-3">
        <h3>T-SHIRT COLLECTION</h3>
      </div>
    </div>
    <div class="d-flex justify-content-center">
      <div class="text-center container" style="margin: 50px 0px">
        <hr style="float: left; width: 40%; border-top: 1px solid #000" />
        <h3 class="text-1" style="display: inline-block">FEATURED PRODUCTS</h3>
        <hr style="float: right; width: 40%; border-top: 1px solid #000"" />
      </div>
    </div>
    <div
      class="d-flex flex-wrap justify-content-center gap-4 mt-4 container"
      id="card-container"
    ></div>
    <div class="text-center" id="loader">Loading data</div>
    <footer class="container row" style="margin: 200px auto">
      <div class="col-lg-4 mt-3">
        <h3 class="text-center">Help</h3>
        <div class="d-flex justify-content-center">
          <button class="btn btn-outline-success d-flex align-items-center">
            <iconify-icon icon="logos:whatsapp-icon" width="30"></iconify-icon>
            <span class="mx-2">Silahkan hubungi kami</span>
          </button>
        </div>
      </div>
      <div class="col-lg-4 mt-3">
        <h3 class="text-center">About Us</h3>
        <div class="text-center">
          <p>
            Lorem Ipsum is simply dummy text of the printing and typesetting
            industry. Lorem Ipsum has been the industry's standard dummy text
            ever since the 1500s, when an unknown printer took a galley of type
            and scrambled it to make a type specimen book. It has survived not
            only five centuries, but also the leap into electronic typesetting,
            remaining essentially unchanged.
          </p>
        </div>
      </div>
      <div class="col-lg-4 mt-3">
        <h3 class="text-center">Contact Us</h3>
        <div class="d-flex justify-content-center gap-2">
          <a href="#" class="btn"
            ><iconify-icon icon="line-md:instagram" width="30"></iconify-icon
          ></a>
          <a href="#" class="btn"
            ><iconify-icon
              icon="ant-design:facebook-outlined"
              width="30"
            ></iconify-icon
          ></a>
          <a href="#" class="btn"
            ><iconify-icon icon="simple-icons:shopee" width="30"></iconify-icon
          ></a>
          <a href="#" class="btn"
            ><iconify-icon icon="ri:line-line" width="30"></iconify-icon
          ></a>
        </div>
      </div>
    </footer>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
  </body>
</html>

<script>
  var currentPage = 0;
  var loading = false;
  var allDataLoaded = false;

  function populateCard(data) {
    var card = `
      <div class="card" style="width: 18rem">
        <img src="${data.photo}" class="card-img-top" alt="..." />
        <div class="card-body">
          <h5 class="card-title">${data.name}</h5>
          <p class="card-text">Rp.${data.price}</p>
          <div class="d-flex justify-content-center">
            <a href="detail.html?id=${data.id}" class="btn-detail">lihat detail</a>
          </div>
        </div>
      </div>`;

    $("#card-container").append(card);
  }

  function showAllDataLoaded() {
    $("#card-container").append("<br/><p>data sudah muncul semua</p>");
  }

  function nextPage() {
    if (loading || allDataLoaded) return;
    loading = true;

    $("#loader").show();

    $.get(
      "https://sistemtoko.com/public/demo/product?page=" + (currentPage + 1),
      function (response) {
        response.aaData.forEach((data) => {
          console.log(data);
          populateCard(data);
        });
        currentPage++;
        loading = false;

        $("#loader").hide();

        if (response.aaData.length === 0) {
          allDataLoaded = true;
          showAllDataLoaded();
        }
      }
    );
  }
  $(window).scroll(function () {
    if (
      $(window).scrollTop() >=
      $(document).height() - $(window).height() - 300
    ) {
      nextPage();
    }
  });
  $(document).ready(function () {
    $.ajaxSetup({
      headers: { "X-Requested-With": "XMLHttpRequest" },
    });

    $.get("https://demo.sistemtoko.com/api-view/cart", function (data) {
      $("#tes").append(data);
    });
    $("#button").click(function () {
      var selectedvarian = $("#select-varian option:selected").val();
      $.get(
        "https://sistemtoko.com/public/demo/single/" + selectedvarian,
        function (data) {
          console.log(data);
          product_id = data.product_id;
          product_name = data.product_name;
          product_img = `https://sistemtoko.com/img/user/demo/product/${data.product_img}`;
          product_price = parseFloat(data.product_price).toString();
          product_qty = 0;
          product_weight = data.product_weight;
          product_stock = data.product_qty_stock;
          varian = data.varian_keyword_value;
          window.addCart(
            product_id,
            product_name + " - " + varian,
            product_img,
            product_price,
            product_weight
          );
        }
      );
    });
  });

  $(document).ready(function () {
    $("#sidebarCart").click(function () {
      if ($("#cart-wrapper").hasClass("toggled")) {
        $("#cart-wrapper").removeClass("toggled");
      } else {
        $("#cart-wrapper").addClass("toggled");
      }
    });
  });
</script>
